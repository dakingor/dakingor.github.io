<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kotlin语法基础 | 大坚博客</title>
    <meta name="description" content="现在还远远没有达到需要拼智商的地步">
    <link rel="icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/styles.bb1fe17d.css" as="style"><link rel="preload" href="/assets/js/app.bb1fe17d.js" as="script"><link rel="preload" href="/assets/js/61.32aea37e.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.b05fc641.css"><link rel="prefetch" href="/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/assets/js/1.b05fc641.js"><link rel="prefetch" href="/assets/js/10.326ff491.js"><link rel="prefetch" href="/assets/js/11.9241fc7b.js"><link rel="prefetch" href="/assets/js/12.7acf36a5.js"><link rel="prefetch" href="/assets/js/13.ec549dd5.js"><link rel="prefetch" href="/assets/js/14.28942eba.js"><link rel="prefetch" href="/assets/js/15.e903c1ca.js"><link rel="prefetch" href="/assets/js/16.4d7ab5b5.js"><link rel="prefetch" href="/assets/js/17.36afdc36.js"><link rel="prefetch" href="/assets/js/18.cac2535e.js"><link rel="prefetch" href="/assets/js/19.cd2f75e9.js"><link rel="prefetch" href="/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/assets/js/20.bf313935.js"><link rel="prefetch" href="/assets/js/21.31b36d89.js"><link rel="prefetch" href="/assets/js/22.0361f270.js"><link rel="prefetch" href="/assets/js/23.1b3f1574.js"><link rel="prefetch" href="/assets/js/24.4d491f2a.js"><link rel="prefetch" href="/assets/js/25.52f1876f.js"><link rel="prefetch" href="/assets/js/26.e08e41e4.js"><link rel="prefetch" href="/assets/js/27.4bbac78e.js"><link rel="prefetch" href="/assets/js/28.b5bd620c.js"><link rel="prefetch" href="/assets/js/29.84b65be3.js"><link rel="prefetch" href="/assets/js/3.c091e437.js"><link rel="prefetch" href="/assets/js/30.fe84dfad.js"><link rel="prefetch" href="/assets/js/31.166d5bc3.js"><link rel="prefetch" href="/assets/js/32.d65d9239.js"><link rel="prefetch" href="/assets/js/33.583bc596.js"><link rel="prefetch" href="/assets/js/34.6b83f133.js"><link rel="prefetch" href="/assets/js/35.49d1569f.js"><link rel="prefetch" href="/assets/js/36.0446fb7e.js"><link rel="prefetch" href="/assets/js/37.5fbd12a4.js"><link rel="prefetch" href="/assets/js/38.1b808891.js"><link rel="prefetch" href="/assets/js/39.3b1c557a.js"><link rel="prefetch" href="/assets/js/4.fb6903e4.js"><link rel="prefetch" href="/assets/js/40.ac5b164f.js"><link rel="prefetch" href="/assets/js/41.45b078e5.js"><link rel="prefetch" href="/assets/js/42.d40844bf.js"><link rel="prefetch" href="/assets/js/43.9009d6e3.js"><link rel="prefetch" href="/assets/js/44.1e61fc92.js"><link rel="prefetch" href="/assets/js/45.9424e6d8.js"><link rel="prefetch" href="/assets/js/46.efbee1cd.js"><link rel="prefetch" href="/assets/js/47.cee8ae47.js"><link rel="prefetch" href="/assets/js/48.3d5e7cb5.js"><link rel="prefetch" href="/assets/js/49.22238313.js"><link rel="prefetch" href="/assets/js/5.8891e232.js"><link rel="prefetch" href="/assets/js/50.4affbe35.js"><link rel="prefetch" href="/assets/js/51.fdb6ae2c.js"><link rel="prefetch" href="/assets/js/52.30127554.js"><link rel="prefetch" href="/assets/js/53.0dacde79.js"><link rel="prefetch" href="/assets/js/54.e2815542.js"><link rel="prefetch" href="/assets/js/55.83d95da2.js"><link rel="prefetch" href="/assets/js/56.fd6cfa75.js"><link rel="prefetch" href="/assets/js/57.64041257.js"><link rel="prefetch" href="/assets/js/58.feb49a9c.js"><link rel="prefetch" href="/assets/js/59.dc8df387.js"><link rel="prefetch" href="/assets/js/6.d54c1117.js"><link rel="prefetch" href="/assets/js/60.631c04b3.js"><link rel="prefetch" href="/assets/js/62.5cfec479.js"><link rel="prefetch" href="/assets/js/63.1433dd8f.js"><link rel="prefetch" href="/assets/js/64.ad33ff3d.js"><link rel="prefetch" href="/assets/js/65.701a8222.js"><link rel="prefetch" href="/assets/js/66.24bd90de.js"><link rel="prefetch" href="/assets/js/67.d396f2ec.js"><link rel="prefetch" href="/assets/js/68.2afd7019.js"><link rel="prefetch" href="/assets/js/69.05781e5f.js"><link rel="prefetch" href="/assets/js/7.1b94b949.js"><link rel="prefetch" href="/assets/js/70.2cf85943.js"><link rel="prefetch" href="/assets/js/71.aab07104.js"><link rel="prefetch" href="/assets/js/72.1533ead8.js"><link rel="prefetch" href="/assets/js/73.4e5dc4da.js"><link rel="prefetch" href="/assets/js/74.e77dfcb1.js"><link rel="prefetch" href="/assets/js/75.e8e4c83e.js"><link rel="prefetch" href="/assets/js/76.ce341a40.js"><link rel="prefetch" href="/assets/js/77.c2342e89.js"><link rel="prefetch" href="/assets/js/78.a56458f9.js"><link rel="prefetch" href="/assets/js/79.6407212c.js"><link rel="prefetch" href="/assets/js/8.f8c818df.js"><link rel="prefetch" href="/assets/js/80.6554cb4c.js"><link rel="prefetch" href="/assets/js/81.84c710c0.js"><link rel="prefetch" href="/assets/js/82.32cdc5bb.js"><link rel="prefetch" href="/assets/js/83.e08a0de0.js"><link rel="prefetch" href="/assets/js/84.59fefb9d.js"><link rel="prefetch" href="/assets/js/85.af63859c.js"><link rel="prefetch" href="/assets/js/86.513e36a1.js"><link rel="prefetch" href="/assets/js/87.c45c0b70.js"><link rel="prefetch" href="/assets/js/88.92b080af.js"><link rel="prefetch" href="/assets/js/89.ad5aec24.js"><link rel="prefetch" href="/assets/js/9.6d13d821.js"><link rel="prefetch" href="/assets/js/90.a5156631.js"><link rel="prefetch" href="/assets/js/91.fac5ac80.js"><link rel="prefetch" href="/assets/js/92.07aa1e42.js"><link rel="prefetch" href="/assets/js/93.c5f9a0d5.js"><link rel="prefetch" href="/assets/js/94.e05d5d7e.js"><link rel="prefetch" href="/assets/js/95.fea62791.js"><link rel="prefetch" href="/assets/js/96.449a8e88.js"><link rel="prefetch" href="/assets/js/97.94f2a5fd.js">
    <link rel="stylesheet" href="/assets/css/1.styles.b05fc641.css"><link rel="stylesheet" href="/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/assets/css/styles.bb1fe17d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">大坚博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">客户端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/android/Activity生命周期.html" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/html/CSS的创建与表现.html" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">服务端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/Spring.html" class="nav-link">Spring</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kotlin/Kotlin语法基础.html" class="nav-link">Kotlin</a></li><li class="dropdown-item"><!----> <a href="/java/Java平台.html" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/c/类型、运算符与表达式.html" class="nav-link">C</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/设计模式基础.html" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/data-structure/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/network-and-security/" class="nav-link">网络与安全</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">系统与工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/mac/Homebrew.html" class="nav-link">Mac</a></li><li class="dropdown-item"><!----> <a href="/gradle/" class="nav-link">Gradle</a></li><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">多媒体</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/opencv/搭建OpenCV Android项目.html" class="nav-link">OpenCV</a></li><li class="dropdown-item"><!----> <a href="/ffmpeg/macOS上编译FFmpeg.html" class="nav-link">FFmpeg</a></li></ul></div></div><div class="nav-item"><a href="/about-me/" class="nav-link">关于我</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">客户端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/android/Activity生命周期.html" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/html/CSS的创建与表现.html" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">服务端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/Spring.html" class="nav-link">Spring</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kotlin/Kotlin语法基础.html" class="nav-link">Kotlin</a></li><li class="dropdown-item"><!----> <a href="/java/Java平台.html" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/c/类型、运算符与表达式.html" class="nav-link">C</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/python/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/设计模式基础.html" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/data-structure/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/network-and-security/" class="nav-link">网络与安全</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">系统与工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/mac/Homebrew.html" class="nav-link">Mac</a></li><li class="dropdown-item"><!----> <a href="/gradle/" class="nav-link">Gradle</a></li><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">多媒体</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/opencv/搭建OpenCV Android项目.html" class="nav-link">OpenCV</a></li><li class="dropdown-item"><!----> <a href="/ffmpeg/macOS上编译FFmpeg.html" class="nav-link">FFmpeg</a></li></ul></div></div><div class="nav-item"><a href="/about-me/" class="nav-link">关于我</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/kotlin/Kotlin语法基础.html" class="active sidebar-link">Kotlin语法基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kotlin/Kotlin语法基础.html#基本元素" class="sidebar-link">基本元素</a></li><li class="sidebar-sub-header"><a href="/kotlin/Kotlin语法基础.html#类和属性" class="sidebar-link">类和属性</a></li><li class="sidebar-sub-header"><a href="/kotlin/Kotlin语法基础.html#枚举和when" class="sidebar-link">枚举和when</a></li><li class="sidebar-sub-header"><a href="/kotlin/Kotlin语法基础.html#迭代" class="sidebar-link">迭代</a></li><li class="sidebar-sub-header"><a href="/kotlin/Kotlin语法基础.html#异常" class="sidebar-link">异常</a></li></ul></li><li><a href="/kotlin/函数的定义与调用.html" class="sidebar-link">函数的定义与调用</a></li><li><a href="/kotlin/类、对象和接口.html" class="sidebar-link">类、对象和接口</a></li><li><a href="/kotlin/Lambda编程.html" class="sidebar-link">Lambda编程</a></li><li><a href="/kotlin/Kotlin的类型系统.html" class="sidebar-link">Kotlin的类型系统</a></li><li><a href="/kotlin/运算符重载及其他约定.html" class="sidebar-link">运算符重载及其他约定</a></li><li><a href="/kotlin/高阶函数.html" class="sidebar-link">高阶函数</a></li><li><a href="/kotlin/注解.html" class="sidebar-link">注解</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="kotlin语法基础"><a href="#kotlin语法基础" aria-hidden="true" class="header-anchor">#</a> Kotlin语法基础</h1> <p></p><div class="table-of-contents"><ul><li><a href="#基本元素">基本元素</a><ul><li><a href="#函数">函数</a></li><li><a href="#语句和表达式">语句和表达式</a></li><li><a href="#变量">变量</a></li><li><a href="#字符串模板">字符串模板</a></li><li><a href="#as与is">as与is</a></li></ul></li><li><a href="#类和属性">类和属性</a><ul><li><a href="#类">类</a></li><li><a href="#属性">属性</a></li><li><a href="#kotlin源码布局">Kotlin源码布局</a></li></ul></li><li><a href="#枚举和when">枚举和when</a><ul><li><a href="#声明枚举类">声明枚举类</a></li><li><a href="#使用when处理枚举类">使用when处理枚举类</a></li><li><a href="#when允许使用任意对象">when允许使用任意对象</a></li><li><a href="#不带参数的when">不带参数的when</a></li><li><a href="#用when代替if">用when代替if</a></li></ul></li><li><a href="#迭代">迭代</a><ul><li><a href="#while循环">while循环</a></li><li><a href="#for循环">for循环</a></li><li><a href="#区间和数列">区间和数列</a></li><li><a href="#迭代map">迭代map</a></li><li><a href="#in运算符">in运算符</a></li></ul></li><li><a href="#异常">异常</a><ul><li><a href="#抛出异常">抛出异常</a></li><li><a href="#处理异常">处理异常</a></li></ul></li></ul></div><p></p> <h2 id="基本元素"><a href="#基本元素" aria-hidden="true" class="header-anchor">#</a> 基本元素</h2> <h3 id="函数"><a href="#函数" aria-hidden="true" class="header-anchor">#</a> 函数</h3> <p>函数的声明以关键字fun开始，函数名称紧随其后，接下来是括号括起来的参数列表，之后是冒号隔开的返回类型，最后是大括号括起来的函数体。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>fun 函数名(参数列表): 返回类型 {
    函数体
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> a <span class="token keyword">else</span> b <span class="token comment">// 与Java中的三元运算符相似</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果某个函数的函数体只有单个表达式，可用这个表达式作为完整的函数体，并去掉花括号和return语句。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> a <span class="token keyword">else</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因为表达式函数体的返回类型可以进行推导，所以可进一步简化，省掉返回类型。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> a <span class="token keyword">else</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="语句和表达式"><a href="#语句和表达式" aria-hidden="true" class="header-anchor">#</a> 语句和表达式</h3> <p>语句和表达式的区别是：表达式有值，并且能够作为另一个表达式的一部分使用；而语句总是包围着它的代码块中的顶层元素，并且没有自己的值。</p> <p>在Java中，所有的控制结构都是语句。而在Kotlin中，<strong>除了循环</strong>（for、do和do/while）以外，<strong>大多数控制结构都是表达式</strong>。例如，if是表达式，而不是语句。</p> <p>另外，Java中的<strong>赋值操作</strong>是表达式，而在Kotlin中<strong>变成了语句</strong>。</p> <h3 id="变量"><a href="#变量" aria-hidden="true" class="header-anchor">#</a> 变量</h3> <p>Kotlin的变量声明是以关键字开始，然后是变量名称，最后是类型。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> name<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;daking&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可省略类型声明，Kotlin会根据初始化器来判断变量的类型。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string">&quot;daking&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>声明变量的关键字有两个：</p> <ul><li><p><strong>val</strong>（来自value）—— 不可变引用。使用val声明的变量不能在初始化之后再次赋值。它对应的是Java的final变量。</p></li> <li><p><strong>var</strong>（来自variable）—— 可变引用。这种变量的值可以被改变。它对应的是普通（非final）的Java变量。</p></li></ul> <p>默认情况下，应该尽可能地使用val关键字来声明所有的Kotlin变量，仅在必要的时间换成var。</p> <p>在定义val变量的代码块执行期间，val变量只能进行唯一一次初始化。但如果编译器能确保只有唯一一条初始化语句会被执行，可根据条件使用不同的值来初始化它。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> message<span class="token operator">:</span> String
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">canPerformOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message <span class="token operator">=</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    message <span class="token operator">=</span> <span class="token string">&quot;fail&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>尽管val引用自身是不可变的，但是它指向的对象可能是可变的。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> languages <span class="token operator">=</span> <span class="token function">arrayListOf</span><span class="token punctuation">(</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span>
languages<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Kotlin&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>即使var关键字允许变量改变自己的值，但它的类型却是改变不了的。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token number">10</span>
result <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span> <span class="token comment">// 错误，类型不匹配</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="字符串模板"><a href="#字符串模板" aria-hidden="true" class="header-anchor">#</a> 字符串模板</h3> <p>Kotlin允许你在字符串字面值中引用局部变量，只需要在变量名称前加上字符<code>$</code>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>String name <span class="token operator">=</span> <span class="token string">&quot;daking&quot;</span><span class="token punctuation">;</span>
String message <span class="token operator">=</span> <span class="token string">&quot;I am &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string">&quot;daking&quot;</span>
<span class="token keyword">val</span> message <span class="token operator">=</span> <span class="token string">&quot;I am <span class="token interpolation variable">$name</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>还可以通过<code>${表达式}</code>方式在字符串字面值中引用表达式。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> message <span class="token operator">=</span> <span class="token string">&quot;I am <span class="token interpolation"><span class="token delimiter variable">${</span>people<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token delimiter variable">}</span></span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>还可以在双引号中直接嵌套双引号，只要它们处于某个表达式的范围内（即花括号内）。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> message <span class="token operator">=</span> <span class="token string">&quot;I am ${if (people.size &gt; 0) people[0] else &quot;</span>someone<span class="token string">&quot; }&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="as与is"><a href="#as与is" aria-hidden="true" class="header-anchor">#</a> as与is</h3> <p>使用<code>as</code>关键字来进行特定类型的显式转换。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> p<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> s<span class="token operator">:</span> Student <span class="token operator">=</span> p <span class="token keyword">as</span> Student
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用<code>is</code>检查一个变量是否为指定类型。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">is</span> Student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;It is a student.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Kotlin会进行<strong>智能转换</strong>：如果你检查过一个变量是某种类型，后面就不用再显式地转换它，可以直接把它当作你检查过的类型来使用。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">is</span> Student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="类和属性"><a href="#类和属性" aria-hidden="true" class="header-anchor">#</a> 类和属性</h2> <h3 id="类"><a href="#类" aria-hidden="true" class="header-anchor">#</a> 类</h3> <p>一个只有一个属性的简单JavaBean类，对比下Java和Kotlin关于类的不同写法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> String name<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在Kotlin中实例化一个类对象，不需要<code>new</code>关键字。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;daking&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="属性"><a href="#属性" aria-hidden="true" class="header-anchor">#</a> 属性</h3> <p>在Java中，数据存储在<strong>字段</strong>中，通常还是私有的。如果想让类的使用者访问到数据，得提供<strong>访问器</strong>方法：一个getter，可能还有一个setter。</p> <p>在Java中，字段和其访问器的组合常常被叫作<strong>属性</strong>。而在Kotlin中，属性是头等的语言特性，完全代替了字段和访问器方法。</p> <p>在Kotlin类中声明一个属性和声明一个变量一样：使用val或var关键字。声明成val的属性是只读的，而var属性是可读写的。</p> <p>在Kotlin中，当你声明属性的时候，就声明了对应的访问器：val属性有一个getter，而var属性既有getter又有setter。访问器的默认实现非常简单：创建一个存储值的字段，以及返回值的getter和更新值的setter。若有需要，可声明自定义的访问器。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;daking&quot;</span>
<span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;daking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>getter和setter的命名规则有一个例外：如果属性的名称以<code>is</code>开头，getter不会增加任何的前缀；而它的setter名称中的<code>is</code>会被替换成<code>set</code>。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span>
    <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">val</span> isMarried<span class="token operator">:</span> Boolean
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;daking&quot;</span>
<span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
person<span class="token punctuation">.</span>isMarried <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>isMarried<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;daking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">setMarried</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">isMarried</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="kotlin源码布局"><a href="#kotlin源码布局" aria-hidden="true" class="header-anchor">#</a> Kotlin源码布局</h3> <p>Java把所有的类组织成包。</p> <p>每一个Kotlin文件都以一条<code>package</code>语句开头，而文件中定义的所有声明（类、函数及属性）都会被放在这个包中。</p> <p>假设Kotlin文件A中定义的声明的包与文件B相同，那么文件A可以直接使用文件B中的定义；如果它们的包不相同，文件A需要导入文件B的对应定义。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">package</span> geometry<span class="token punctuation">.</span>shapes <span class="token comment">// 包声明</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Random <span class="token comment">// 导入标准Java库的类</span>

<span class="token keyword">class</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token keyword">val</span> width<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> height<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> isSquare<span class="token operator">:</span> Boolean
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> height <span class="token operator">==</span> width
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">createRandomRectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token punctuation">{</span>
    <span class="token keyword">val</span> random <span class="token operator">=</span> <span class="token function">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>和Java一样，导入语句放在文件的最前面并使用关键字<code>import</code>。Kotlin不区分导入的是类还是函数，而且它允许<code>import</code>任何种类的声明。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">package</span> geometry<span class="token punctuation">.</span>example

<span class="token keyword">import</span> geometry<span class="token punctuation">.</span>shapes<span class="token punctuation">.</span>createRandomRectangle <span class="token comment">// 导入顶层函数</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">createRandomRectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isSquare<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以在包名称后加上<code>*</code>来导入特定包中定义的所有声明。注意这种导入不仅让包中定义的类可见，也会让顶层函数和属性可见。例如，上面例子中的导入语句可改为<code>import geometry.shapes.*</code>。</p> <p>在Java中，要把类放在和包结构相匹配的文件与目录结构中。</p> <p><img src="/15195673809497/15199746582900.jpg" alt="Java源码布局-w518"></p> <p>在Kotlin中，可以把多个类放在同一个文件中，文件的名称还可以随意选择。Kotlin也没有对磁盘上源码文件的布局强加任何限制。但遵循Java的目录布局并根据包结构把源码文件放到对应的目录中，是个良好的习惯。</p> <p><img src="/15195673809497/15199746979670.jpg" alt="Kotlin源码布局-w472"></p> <h2 id="枚举和when"><a href="#枚举和when" aria-hidden="true" class="header-anchor">#</a> 枚举和when</h2> <h3 id="声明枚举类"><a href="#声明枚举类" aria-hidden="true" class="header-anchor">#</a> 声明枚举类</h3> <p>使用<code>enum class</code>关键字来声明一个枚举类。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">enum</span> <span class="token keyword">class</span> Color <span class="token punctuation">{</span>
    RED<span class="token punctuation">,</span> GREEN<span class="token punctuation">,</span> BLUE
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>和Java一样，枚举并不是值的列表，可以给枚举类声明属性和方法。注意要用<strong>分号</strong>把枚举常量列表和方法定义分开。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token function">Color</span><span class="token punctuation">(</span>
    <span class="token keyword">val</span> r<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> g<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> b<span class="token operator">:</span> Int
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">RED</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">GREEN</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">BLUE</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 注意此处的分号是必须的。</span>
    
    <span class="token keyword">fun</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">*</span> <span class="token number">256</span> <span class="token operator">+</span> g<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span> <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token function">println</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>RED<span class="token punctuation">.</span><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="使用when处理枚举类"><a href="#使用when处理枚举类" aria-hidden="true" class="header-anchor">#</a> 使用when处理枚举类</h3> <p>Java中的分支判断语句<code>switch</code>在Kotlin对应的结构是<code>when</code>。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">getMnemonic</span><span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span>
    <span class="token keyword">when</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Color<span class="token punctuation">.</span>RED <span class="token operator">-&gt;</span> <span class="token string">&quot;Richard&quot;</span>
        Color<span class="token punctuation">.</span>GREEN <span class="token operator">-&gt;</span> <span class="token string">&quot;Gave&quot;</span>
        Color<span class="token punctuation">.</span>BLUE <span class="token operator">-&gt;</span> <span class="token string">&quot;Battle&quot;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>和Java不一样，你不需要在每个分支都写上<code>break</code>语句，若匹配成功，只有对应的分支会被执行。</p> <p>可以把<strong>多个值合并到同一分支</strong>，只需要用<strong>逗号</strong>隔开这些值。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">getWarmth</span><span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">when</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Color<span class="token punctuation">.</span>RED<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>ORANGE<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>YELLOW <span class="token operator">-&gt;</span> <span class="token string">&quot;warm&quot;</span>
    Color<span class="token punctuation">.</span>GREEN <span class="token operator">-&gt;</span> <span class="token string">&quot;neutral&quot;</span>
    Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>INDIGO<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>VIOLET <span class="token operator">-&gt;</span> <span class="token string">&quot;cold&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="when允许使用任意对象"><a href="#when允许使用任意对象" aria-hidden="true" class="header-anchor">#</a> when允许使用任意对象</h3> <p>Java中的<code>switch</code>要求必须使用常量（枚举常量、字符串或数字字面值）作为分支条件，而Kotlin的<code>when</code>允许使用任何对象。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">mix</span><span class="token punctuation">(</span>c1<span class="token operator">:</span> Color<span class="token punctuation">,</span> c2<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> 
    <span class="token keyword">when</span><span class="token punctuation">(</span><span class="token function">setOf</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setOf</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>RED<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> ORANGE
        <span class="token function">setOf</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> GREEN
        <span class="token function">setOf</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>VIOLET<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> INDIGO
        <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Dirty color&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 如果没有任何其他分支匹配，就会执行这里</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="不带参数的when"><a href="#不带参数的when" aria-hidden="true" class="header-anchor">#</a> 不带参数的when</h3> <p>如果没有给<code>when</code>表达式提供参数，分支条件就是任意的布尔表达式。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">mixOptimized</span><span class="token punctuation">(</span>c1<span class="token operator">:</span> Color<span class="token punctuation">,</span> c2<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> 
    <span class="token keyword">when</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span>c1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>RED <span class="token operator">&amp;&amp;</span> c2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token punctuation">(</span>c1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>YELLOW <span class="token operator">&amp;&amp;</span> c2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>RED<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
            <span class="token function">ORANGE</span>
            
        <span class="token punctuation">(</span>c1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>BLUE <span class="token operator">&amp;&amp;</span> c2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token punctuation">(</span>c1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>YELLOW <span class="token operator">&amp;&amp;</span> c2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
            <span class="token function">GREEN</span>
            
        <span class="token punctuation">(</span>c1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>BLUE <span class="token operator">&amp;&amp;</span> c2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>VIOLET<span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token punctuation">(</span>c1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>VIOLET <span class="token operator">&amp;&amp;</span> c2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
            INDIGO
            
        <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Dirty color&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="用when代替if"><a href="#用when代替if" aria-hidden="true" class="header-anchor">#</a> 用when代替if</h3> <p>Kotlin没有三元运算符，因为<code>if</code>表达式有返回值，可利用<code>if (x) a else b</code>来实现与三元运算符一样的功能。</p> <p>可以使用<code>when</code>来代替连串的<code>if</code>表达式。</p> <p><code>if</code>和<code>when</code>都可以使用代码块作为分支体，代码块中的最后一个表达式就是结果。</p> <h2 id="迭代"><a href="#迭代" aria-hidden="true" class="header-anchor">#</a> 迭代</h2> <h3 id="while循环"><a href="#while循环" aria-hidden="true" class="header-anchor">#</a> while循环</h3> <p>Kotlin有<code>while</code>循环和<code>do-while</code>循环，它们的语法和Java中相应的循环没有什么区别。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="for循环"><a href="#for循环" aria-hidden="true" class="header-anchor">#</a> for循环</h3> <p>Kotlin中的<code>for</code>循环仅以唯一一种形式存在，和Java的<code>for-each</code>循环一致。写法为：<code>for &lt;item&gt; in &lt;elements&gt;</code>。</p> <h3 id="区间和数列"><a href="#区间和数列" aria-hidden="true" class="header-anchor">#</a> 区间和数列</h3> <p><strong>区间</strong>本质上就是两个值之间的间隔，这两个值通常是数字，一个起始值，一个结束值。</p> <p>使用<code>..</code>运算符来表示<strong>闭合区间</strong>（区间包含起始值和结束值）。例如，<code>1..10</code>、<code>'a'..'z'</code>。</p> <p>如果你能迭代区间中所有的值，这样的区间被称为<strong>数列</strong>。例如，由1到10的整数构成的区间<code>1..10</code>。</p> <p>整数区间常与<code>for</code>循环一起使用。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">..</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 循环打印出1到10的整数</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以使用<code>until</code>函数来创建<strong>半闭合区间</strong>（区间包含起始值，但不包含结束值）。例如，<code>1 until 10</code>。</p> <p>可以使用<code>downTo</code>和<code>step</code>来创建一个带步长的数列。例如，<code>10 downTo 1 step 2</code>是一个从10到1的步长为2的数列。注意，<code>step</code>可以是正数或负数，从而实现递增或递减数列。</p> <h3 id="迭代map"><a href="#迭代map" aria-hidden="true" class="header-anchor">#</a> 迭代map</h3> <p><code>for</code>循环也常用于迭代集合。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 把键和值赋给两个变量</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation variable">$key</span> = <span class="token interpolation variable">$value</span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="in运算符"><a href="#in运算符" aria-hidden="true" class="header-anchor">#</a> in运算符</h3> <p>使用<code>in</code>运算符来检查一个值是否在区间中，或者它的逆运算<code>!in</code>来检查这个值是否不在区间中。此做法同样适用于集合。</p> <h2 id="异常"><a href="#异常" aria-hidden="true" class="header-anchor">#</a> 异常</h2> <p>一个函数可以正常结束，也可以在出现错误的情况下抛出异常。方法的调用者能捕获到这个异常并处理它；如果没有被处理，异常会沿着调用栈再次抛出。</p> <h3 id="抛出异常"><a href="#抛出异常" aria-hidden="true" class="header-anchor">#</a> 抛出异常</h3> <p>Kotlin中抛出异常的方式与Java类似。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>percentage <span class="token operator">!</span><span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;A percentage value must be between 0 and 100.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>和Java不同的是，Kotlin中的<code>throw</code>结构是一个表达式，能作为另一个表达式的一部分使用。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> percentage <span class="token operator">=</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..</span><span class="token number">100</span><span class="token punctuation">)</span>
        number
    <span class="token keyword">else</span>
        <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;A percentage value must be between 0 and 100.&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="处理异常"><a href="#处理异常" aria-hidden="true" class="header-anchor">#</a> 处理异常</h3> <p>和Java一样，Kotlin也是使用带有<code>catch</code>和<code>finally</code>子句的<code>try</code>结构来处理异常。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">readNumber</span><span class="token punctuation">(</span>reader<span class="token operator">:</span> BufferedReader<span class="token punctuation">)</span><span class="token operator">:</span> Int<span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> NumberFormatException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果用Java来写这个函数，要在函数声明后写上<code>throws IOException</code>。这是因为<code>IOException</code>是一个<strong>受检异常</strong>。在Java中，受检异常必须显式地处理，必须为函数声明能抛出的所有受检异常。</p> <p>Kotlin并不区分受检异常和未受检异常。不用指定函数抛出的异常，而且可以处理也可以不处理异常。</p> <p><code>try</code>可以作为表达式来使用，它的代码块中的最后一句就是表达式结果。<code>catch</code>也是。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">readNumber</span><span class="token punctuation">(</span>reader<span class="token operator">:</span> BufferedReader<span class="token punctuation">)</span><span class="token operator">:</span> Int<span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> NumberFormatException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/61.32aea37e.js" defer></script><script src="/assets/js/app.bb1fe17d.js" defer></script>
  </body>
</html>
