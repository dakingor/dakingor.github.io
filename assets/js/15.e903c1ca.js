(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{159:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"dagger2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dagger2","aria-hidden":"true"}},[s._v("#")]),s._v(" Dagger2")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#依赖注入"}},[s._v("依赖注入")]),t("ul",[t("li",[t("a",{attrs:{href:"#构造注入"}},[s._v("构造注入")])]),t("li",[t("a",{attrs:{href:"#接口注入"}},[s._v("接口注入")])]),t("li",[t("a",{attrs:{href:"#注解注入"}},[s._v("注解注入")])])])]),t("li",[t("a",{attrs:{href:"#dagger2基础"}},[s._v("Dagger2基础")]),t("ul",[t("li",[t("a",{attrs:{href:"#dagger简介"}},[s._v("Dagger简介")])]),t("li",[t("a",{attrs:{href:"#android配置-java版"}},[s._v("Android配置-Java版")])]),t("li",[t("a",{attrs:{href:"#android配置-kotlin版"}},[s._v("Android配置-Kotlin版")])]),t("li",[t("a",{attrs:{href:"#注解大全"}},[s._v("注解大全")])])])]),t("li",[t("a",{attrs:{href:"#dagger2依赖"}},[s._v("Dagger2依赖")]),t("ul",[t("li",[t("a",{attrs:{href:"#两种提供依赖方式"}},[s._v("两种提供依赖方式")])]),t("li",[t("a",{attrs:{href:"#inject-提供依赖"}},[s._v("@Inject提供依赖")])]),t("li",[t("a",{attrs:{href:"#module-provides-提供依赖"}},[s._v("@Module&@Provides提供依赖")])])])]),t("li",[t("a",{attrs:{href:"#区分提供方"}},[s._v("区分提供方")]),t("ul",[t("li",[t("a",{attrs:{href:"#named"}},[s._v("@Named")])]),t("li",[t("a",{attrs:{href:"#qualifier"}},[s._v("@Qualifier")])])])]),t("li",[t("a",{attrs:{href:"#限定作用域"}},[s._v("限定作用域")]),t("ul",[t("li",[t("a",{attrs:{href:"#singleton"}},[s._v("@Singleton")])]),t("li",[t("a",{attrs:{href:"#scope"}},[s._v("@Scope")])])])]),t("li",[t("a",{attrs:{href:"#component"}},[s._v("Component")]),t("ul",[t("li",[t("a",{attrs:{href:"#component之间的依赖"}},[s._v("Component之间的依赖")])]),t("li",[t("a",{attrs:{href:"#subcomponent"}},[s._v("Subcomponent")])])])]),t("li",[t("a",{attrs:{href:"#lazy与provider"}},[s._v("Lazy与Provider")])]),t("li",[t("a",{attrs:{href:"#dagger2注意事项"}},[s._v("Dagger2注意事项")]),t("ul",[t("li",[t("a",{attrs:{href:"#component类"}},[s._v("Component类")])]),t("li",[t("a",{attrs:{href:"#module类"}},[s._v("Module类")])]),t("li",[t("a",{attrs:{href:"#scope注解"}},[s._v("scope注解")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"依赖注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#依赖注入","aria-hidden":"true"}},[s._v("#")]),s._v(" 依赖注入")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        engine "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"构造注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造注入","aria-hidden":"true"}},[s._v("#")]),s._v(" 构造注入")]),s._v(" "),t("p",[s._v("通过给构造函数传参，进而给依赖的成员变量赋值，最终实现注入。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("engine "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"接口注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接口注入","aria-hidden":"true"}},[s._v("#")]),s._v(" 接口注入")]),s._v(" "),t("p",[s._v("实现接口方法，以传参的方式实现注入。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Injection")]),t("span",{attrs:{class:"token generics function"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("T"),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T t"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Injection")]),t("span",{attrs:{class:"token generics function"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("Engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("engine "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"注解注入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注解注入","aria-hidden":"true"}},[s._v("#")]),s._v(" 注解注入")]),s._v(" "),t("p",[s._v("使用Java注解"),t("strong",[s._v("在编译阶段生成代码")]),s._v("或"),t("strong",[s._v("在运行阶段通过反射调用代码")]),s._v("，从而实现注入。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\n    Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"dagger2基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dagger2基础","aria-hidden":"true"}},[s._v("#")]),s._v(" Dagger2基础")]),s._v(" "),t("h3",{attrs:{id:"dagger简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dagger简介","aria-hidden":"true"}},[s._v("#")]),s._v(" Dagger简介")]),s._v(" "),t("p",[s._v("Dagger是一个应用于Android和Java的依赖注入框架。目前有Dagger和Dagger2两个版本。")]),s._v(" "),t("p",[s._v("Dagger是由Square公司受到Guice的启发而开发的，是半静态半运行时的。虽然它的依赖注入是完全静态的，但其有向无环图是基于反射来生成的，严重影响了性能。")]),s._v(" "),t("p",[s._v("Dagger2是Google团队fork了Dagger项目进行改造升级后的产品。它使Dagger从半静态变成完全静态，从Map式的API变成声明式API。它生成的代码更优雅高效，而且可在编译期间发现错误。")]),s._v(" "),t("h3",{attrs:{id:"android配置-java版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android配置-java版","aria-hidden":"true"}},[s._v("#")]),s._v(" Android配置-Java版")]),s._v(" "),t("p",[s._v("在工程的"),t("code",[s._v("build.gradle")]),s._v("中添加：")]),s._v(" "),t("div",{staticClass:"language-gradle line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("buildscript {\n    dependencies {\n        classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'\n    }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("在模块的"),t("code",[s._v("build.gradle")]),s._v("中添加：")]),s._v(" "),t("div",{staticClass:"language-gradle line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('apply plugin: \'com.neenbedankt.android-apt\'\n\ndependencies {\n    // dagger公用API\n    compile "com.google.dagger:dagger:$dagger_version"\n    // dagger注解处理器\n    apt "com.google.dagger:dagger-compiler:$dagger_version"\n    // 添加android缺失的部分javax注解\n    provided "javax.annotation:jsr250-api:1.0"\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"android配置-kotlin版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android配置-kotlin版","aria-hidden":"true"}},[s._v("#")]),s._v(" Android配置-Kotlin版")]),s._v(" "),t("p",[s._v("在模块的"),t("code",[s._v("build.gradle")]),s._v("中添加：")]),s._v(" "),t("div",{staticClass:"language-gradle line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('apply plugin: \'kotlin-kapt\'\n\ndependencies {\n    // dagger公用API\n    implementation "com.google.dagger:dagger:$dagger_version"\n    // dagger注解处理器\n    kapt "com.google.dagger:dagger-compiler:$dagger_version"\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"注解大全"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注解大全","aria-hidden":"true"}},[s._v("#")]),s._v(" 注解大全")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("注解")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("用法")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Inject")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("有两个作用："),t("br"),s._v("1. 标记需要依赖的变量，以此告知Dagger要为它提供依赖。"),t("br"),s._v("2. 标记构造函数，为被"),t("code",[s._v("@Inject")]),s._v("标记的变量提供所需依赖。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Module")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("用于标注提供依赖的类。"),t("br"),s._v("该类中的方法专门提供依赖。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Provides")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("用于标注"),t("code",[s._v("@Module")]),s._v("类中的方法。"),t("br"),s._v("该方法在需要提供依赖时被调用，从而把预先提供好的对象赋值给"),t("code",[s._v("@Inject")]),s._v("变量。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Component")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("用于标注接口，是依赖需求方和依赖提供方之间的桥梁。"),t("br"),t("code",[s._v("@Component")]),s._v("接口在编译时会生成对应的实现类，如CarComponent接口生成DaggerCarComponent类。用户可通过调用这个实现类的方法完成注入。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Qulifier")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("用于自定义注解。"),t("br"),s._v("通过自定义的注解去标注依赖提供方和需求方，能区分同一个接口的不同实现类，避免“注解迷失”。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Named")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("是"),t("code",[s._v("@Qulifier")]),s._v("的一种默认实现。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Scope")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("限定注解作用域，实现局部的单例。"),t("br"),s._v("Scope主要用于Component的组织方式。"),t("br"),s._v("管理Component和Module之间的匹配关系。")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("@Singleton")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("是"),t("code",[s._v("@Scope")]),s._v("的一种默认实现，表示全局单例。"),t("br"),s._v("实际上Singleton并没有实现单例的能力，它是否能提供全局单例要取决于对应的Component是否为一个全局对象。")])])])]),s._v(" "),t("h2",{attrs:{id:"dagger2依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dagger2依赖","aria-hidden":"true"}},[s._v("#")]),s._v(" Dagger2依赖")]),s._v(" "),t("h3",{attrs:{id:"两种提供依赖方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#两种提供依赖方式","aria-hidden":"true"}},[s._v("#")]),s._v(" 两种提供依赖方式")]),s._v(" "),t("p",[s._v("Dagger2可通过两种方式来提供依赖：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在类的构造函数上使用"),t("code",[s._v("@Inject")]),s._v("。")])]),s._v(" "),t("li",[t("p",[s._v("创建用"),t("code",[s._v("@Module")]),s._v("标记的类和定义用"),t("code",[s._v("@Provides")]),s._v("标记的方法，每个"),t("code",[s._v("@Provides")]),s._v("方法提供依赖。")])])]),s._v(" "),t("p",[t("code",[s._v("@Inject")]),s._v("方式用于开发者自己编写的具体类对外提供依赖。而"),t("code",[s._v("@Module")]),s._v("&"),t("code",[s._v("@Provides")]),s._v("用于接口或第三方库对外提供依赖。")]),s._v(" "),t("p",[s._v("其实，"),t("code",[s._v("@Module")]),s._v("&"),t("code",[s._v("@Provides")]),s._v("方式是对"),t("code",[s._v("@Inject")]),s._v("方式“无法在提供方的构造函数上添加"),t("code",[s._v("@Inject")]),s._v("”这个缺点的弥补。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("因为接口没有构造函数，无法使用"),t("code",[s._v("@Inject")]),s._v("来提供依赖。")])]),s._v(" "),t("li",[t("p",[s._v("因为开发者无法修改第三方库的源码，无法在第三方库中的某个类的构造函数上添加"),t("code",[s._v("@Inject")]),s._v("。")])])]),s._v(" "),t("p",[t("code",[s._v("@Inject")]),s._v("方式和"),t("code",[s._v("@Module")]),s._v("&"),t("code",[s._v("@Provides")]),s._v("方式都可以提供依赖，那么Dagger2查找依赖的具体规则为：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("查找"),t("code",[s._v("@Module")]),s._v("标记的类中是否存在提供对应依赖的"),t("code",[s._v("@Provides")]),s._v("方法。")])]),s._v(" "),t("li",[t("p",[s._v("若在步骤1中存在提供对应依赖的"),t("code",[s._v("@Provides")]),s._v("方法，查看该方法是否存在参数。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("若存在参数，则从步骤1开始依次查找依赖来初始化每个参数。")])]),s._v(" "),t("li",[t("p",[s._v("若不存在参数，则直接初始化该类实例，完成一次依赖注入。")])])])]),s._v(" "),t("li",[t("p",[s._v("若在步骤1中不存在提供对应依赖的"),t("code",[s._v("@Provides")]),s._v("方法，则查找"),t("code",[s._v("@Inject")]),s._v("标注的构造函数。")])]),s._v(" "),t("li",[t("p",[s._v("若在步骤3中存在提供对应依赖的构造函数，查看该构造函数是否存在参数。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("若存在参数，则从步骤1开始依次查找依赖来初始化每个参数。")])]),s._v(" "),t("li",[t("p",[s._v("若不存在参数，则直接初始化该类实例，完成一次依赖注入。")])])])])]),s._v(" "),t("p",[s._v("注意，不管是哪种提供依赖方式，都需要使用"),t("code",[s._v("@Component")]),s._v("来作为依赖方和提供方之间的桥梁。")]),s._v(" "),t("h3",{attrs:{id:"inject提供依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inject提供依赖","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("code",[s._v("@Inject")]),s._v("提供依赖")]),s._v(" "),t("p",[s._v("Car类是依赖需求方，Engine是依赖提供方，CarComponent接口是它们的桥梁。通过"),t("code",[s._v("@Inject")]),s._v("标注Engine的构造函数来提供依赖。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Car.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("// Car依赖Engine")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\n    Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        DaggerCarComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("builder")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("build")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" Engine "),t("span",{attrs:{class:"token function"}},[s._v("getEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Engine.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\n    "),t("span",{attrs:{class:"token function"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("run")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token function"}},[s._v("sout")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"引擎运行中..."')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarComponent.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Car car"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("注意，使用"),t("code",[s._v("@Inject")]),s._v("标注的成员变量，不能用private修饰符。")]),s._v(" "),t("h3",{attrs:{id:"module-provides提供依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#module-provides提供依赖","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("code",[s._v("@Module")]),s._v("&"),t("code",[s._v("@Provides")]),s._v("提供依赖")]),s._v(" "),t("p",[s._v("与上面的例子类似，区别在于通过"),t("code",[s._v("@Module")]),s._v("和"),t("code",[s._v("@Provides")]),s._v("来提供依赖。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Car.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("// Car依赖Engine")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\n    Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        DaggerCarComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("builder")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("carModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("build")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" Engine "),t("span",{attrs:{class:"token function"}},[s._v("getEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Engine.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" String name"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("// 此处没有@Inject")]),s._v("\n    "),t("span",{attrs:{class:"token function"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String name"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("run")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token function"}},[s._v("sout")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"引擎运行中..."')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarModule.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("CarModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token comment"}},[s._v("// 依赖String对象的提供方")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("// 此处用于解决下面provideEngine方法的所需String参数。")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    String "),t("span",{attrs:{class:"token function"}},[s._v("provideEngineName")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"宝马引擎"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token comment"}},[s._v("// 依赖Engine对象的提供方")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    Engine "),t("span",{attrs:{class:"token function"}},[s._v("provideEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String name"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarComponent.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("modules "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CarModule"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Car car"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"区分提供方"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区分提供方","aria-hidden":"true"}},[s._v("#")]),s._v(" 区分提供方")]),s._v(" "),t("p",[s._v("在使用"),t("code",[s._v("@Module")]),s._v("类和"),t("code",[s._v("@Provides")]),s._v("方法来实现依赖的提供方时，方法名可随便定义（但一般为provideXxx），但返回值的类型要谨慎，这是因为Dagger2是根据这个方法的返回值类型来决定它为哪个"),t("code",[s._v("@Inject")]),s._v("标记的变量提供依赖。")]),s._v(" "),t("p",[s._v("如果有多个方法的返回值的类型相同，Dagger2就无法识别出到底哪个方法为哪个"),t("code",[s._v("@Inject")]),s._v("变量提供依赖了。此时需要使用"),t("code",[s._v("@Named")]),s._v("或"),t("code",[s._v("@Qualifier")]),s._v("自定义注解来区分不同的依赖提供方。")]),s._v(" "),t("h3",{attrs:{id:"named"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#named","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("code",[s._v("@Named")])]),s._v(" "),t("p",[t("code",[s._v("@Named")]),s._v("就是"),t("code",[s._v("javax.inject.Named")]),s._v("注解接口。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Qualifier")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 注明是Qualifier")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RetentionPolicy"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RUNTIME"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" @"),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Named")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    String "),t("span",{attrs:{class:"token function"}},[s._v("value")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('""')]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("以下使用"),t("code",[s._v('@Named("name")')]),s._v("来区分不同的依赖提供方。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarModule.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("CarModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Named")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"BWM"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    Engine "),t("span",{attrs:{class:"token function"}},[s._v("provideBWMEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"宝马引擎"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Named")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"Benz"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    Engine "),t("span",{attrs:{class:"token function"}},[s._v("provideBenzEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"奔驰引擎"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Car.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v('// 若是Kotlin代码，此处改为@field:[Named("BWM")]')]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Named")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"BWM"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 依赖“宝马引擎”的Engine")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\n    Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("Car")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        DaggerCarComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("builder")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("carModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("build")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" Engine "),t("span",{attrs:{class:"token function"}},[s._v("getEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"qualifier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#qualifier","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("code",[s._v("@Qualifier")])]),s._v(" "),t("p",[t("code",[s._v("@Qualifier")]),s._v("不能单独使用，它是用来自定义一个用于区分不同的依赖提供方的注解接口。"),t("code",[s._v("@Named")]),s._v("就是"),t("code",[s._v("@Qualifier")]),s._v("的一个具体实现。")]),s._v(" "),t("p",[s._v("以下使用"),t("code",[s._v("@Qualifier")]),s._v("自定义注解来区分不同的依赖提供方。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*BMW.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Qualifier")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 注明是Qualifier")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RetentionPolicy"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RUNTIME"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" @"),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("BMW")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Benz.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Qualifier")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 注明是Qualifier")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RetentionPolicy"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RUNTIME"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" @"),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Benz")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarModule.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("CarModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@BMW")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    Engine "),t("span",{attrs:{class:"token function"}},[s._v("provideBWMEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"宝马引擎"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Benz")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    Engine "),t("span",{attrs:{class:"token function"}},[s._v("provideBenzEngine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Engine")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"奔驰引擎"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Car.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Car")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@BWM")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 依赖“宝马引擎”的Engine")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\n    Engine engine"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"限定作用域"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#限定作用域","aria-hidden":"true"}},[s._v("#")]),s._v(" 限定作用域")]),s._v(" "),t("h3",{attrs:{id:"singleton"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#singleton","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("code",[s._v("@Singleton")])]),s._v(" "),t("p",[s._v("实现全局单例。实际上它是否能提供全局单例要取决于对应的Component类是否为一个全局对象。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*App.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("App")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Application")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    AppComponent appComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("onCreate")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("super")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("onCreate")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{attrs:{class:"token comment"}},[s._v("// AppComponent在自定义Application类中初始化，在整个进程中是单例。")]),s._v("\n        appComponent "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" DaggerAppComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("create")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" AppComponent "),t("span",{attrs:{class:"token function"}},[s._v("getAppComponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" appComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*AppComponent.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Singleton")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// Component桥梁使用@Singleton标注")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("modules "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("AppModule"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("AppComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    OkHttpClient "),t("span",{attrs:{class:"token function"}},[s._v("okHttpClient")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("AppModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Singleton")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 依赖提供方使用@Singleton标注")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" OkHttpClient "),t("span",{attrs:{class:"token function"}},[s._v("provideClient")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("OkHttpClient")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*MainActivity.java中的示例代码*/")]),s._v("\nAppComponent appComponent "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("getApplication")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("getAppComponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v('// 打印两次"创建"的OkHttpClient对象，发现都是同一个实例。')]),s._v("\nOkHttpClient client1 "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" appComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("okHttpClient")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nLog"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("d")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TAG"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"client1: "')]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" client1"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nOkHttpClient client2 "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" appComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("okHttpClient")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nLog"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("d")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TAG"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"client2: "')]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v(" client2"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"scope"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scope","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("code",[s._v("@Scope")])]),s._v(" "),t("p",[s._v("通过"),t("code",[s._v("@Scope")]),s._v("自定义注解来限定作用域，实现局部的单例。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarScope.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Scope")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 注明是Scope")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RetentionPolicy"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RUNTIME"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" @"),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarScope")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarModule.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@CarScope")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*CarComponent.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@CarScope")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("modules "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CarModule"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("CarComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Car car"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"component"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component","aria-hidden":"true"}},[s._v("#")]),s._v(" Component")]),s._v(" "),t("h3",{attrs:{id:"component之间的依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component之间的依赖","aria-hidden":"true"}},[s._v("#")]),s._v(" Component之间的依赖")]),s._v(" "),t("p",[s._v("在实际开发中，每个Component类负责一个模块的功能，它们之间可通过dependencies依赖来关联，实现多个模块功能的集成。")]),s._v(" "),t("p",[s._v('进一步扩展上面"限定作用域"章节的"'),t("code",[s._v("@Singleton")]),s._v('"章节的代码来讲解“Component之间的依赖”。')]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*ApiService.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("ApiService")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" OkHttpClient client"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("ApiService")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OkHttpClient client"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("client "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" client"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("request")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*UserScope.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Scope")]),s._v(" "),t("span",{attrs:{class:"token comment"}},[s._v("// 注明是Scope")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RetentionPolicy"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RUNTIME"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" @"),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("UserScope")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*UserModule*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("UserModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("// 此处的OkHttpClient参数依赖由AppComponent来提供。")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@UserScope")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" ApiService "),t("span",{attrs:{class:"token function"}},[s._v("provideApiService")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OkHttpClient client"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("ApiService")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("client"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*UserComponent*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@UserScope")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("modules "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("UserModule"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dependencies "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("AppComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("UserComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MainActivity activity"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*MainActivity.java中的示例代码*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\nApiService apiService"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nApp app "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("getApplication")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("// UserComponent关联UserModule，依赖AppComponent。")]),s._v("\nDaggerUserComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("builder")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("userModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("UserModule")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("appComponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("app"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("getAppComponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("build")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\napiService"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("request")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("注意，“被依赖Component”必须定义接口对外提供“依赖Component”所需的对象。如AppComponent必须定义接口"),t("code",[s._v("OkHttpClient okHttpClient();")]),s._v("对外提供OkHttpClient对象。")]),s._v(" "),t("h3",{attrs:{id:"subcomponent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#subcomponent","aria-hidden":"true"}},[s._v("#")]),s._v(" Subcomponent")]),s._v(" "),t("p",[s._v("Subcomponent同时具备两种不同生命周期的Scope，即Subcomponent具备父Component的Scope，也具备了自己的Scope。")]),s._v(" "),t("p",[s._v("Subcomponent的Scope范围小于父Component。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*FatherComponent.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Singleton")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("FatherComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("// 与Subcomponent建立关联")]),s._v("\n    ChildComponent "),t("span",{attrs:{class:"token function"}},[s._v("getChildComponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*ChildScope.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Scope")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Documented")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Retention")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RetentionPolicy"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RUNTIME"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" @"),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("ChildScope")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*UtilModule.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Module")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("UtilModule")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@ChildScope")]),s._v("\n    "),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Provides")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" Gson "),t("span",{attrs:{class:"token function"}},[s._v("getGson")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Gson")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*ChildComponent.java*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Subcomponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("modules "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("UtilModule"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@ChildScope")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("ChildComponent")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SubcomponentActivity activity"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*SubcomponentActivity.java*/")]),s._v("\nDaggerFatherComponent"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("create")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("getChildComponent")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("inject")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("this")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\nGson gson"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"lazy与provider"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lazy与provider","aria-hidden":"true"}},[s._v("#")]),s._v(" Lazy与Provider")]),s._v(" "),t("p",[t("code",[s._v("dagger.Lazy")]),s._v("接口，用于注入Lazy元素。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Lazy.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("package")]),s._v(" dagger"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Lazy")]),t("span",{attrs:{class:"token generics function"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("T"),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    T "),t("span",{attrs:{class:"token function"}},[s._v("get")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*示例代码*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\nLazy"),t("span",{attrs:{class:"token generics function"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("User"),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" lazyUser"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("// 当调用其`get()`才会创建实例，每次`get()`返回的都是同一个对象。")]),s._v("\nUser user "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" lazyUser"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("get")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("code",[s._v("javax.inject.Provider")]),s._v("接口，用于注入Provider元素。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*Provider.java*/")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("package")]),s._v(" javax"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inject"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Provider")]),t("span",{attrs:{class:"token generics function"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("T"),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    T "),t("span",{attrs:{class:"token function"}},[s._v("get")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("/*示例代码*/")]),s._v("\n"),t("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Inject")]),s._v("\nProvider"),t("span",{attrs:{class:"token generics function"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("User"),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" providerUser"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("// 当调用其`get()`才会创建实例。")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("// 每次`get()`都会强制调用Module的@Provides方法。")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("// 根据@Provides方法的具体实现，可能返回同一个对象，也可能不是。")]),s._v("\nUser user "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" providerUser"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token function"}},[s._v("get")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"dagger2注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dagger2注意事项","aria-hidden":"true"}},[s._v("#")]),s._v(" Dagger2注意事项")]),s._v(" "),t("h3",{attrs:{id:"component类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component类","aria-hidden":"true"}},[s._v("#")]),s._v(" Component类")]),s._v(" "),t("p",[s._v("Component类的inject方法接收父类类型参数，若调用时传入的是子类型对象，则无法注入。")]),s._v(" "),t("p",[s._v("同一个类不能被多个Component类同时注入。")]),s._v(" "),t("p",[s._v("Component类关联的各Module类中不能有重复的provides方法。")]),s._v(" "),t("p",[t("code",[s._v("@Singleton")]),s._v("的生命周期依附于component，同一个module provide singleton，不同component也是不同的。")]),s._v(" "),t("h3",{attrs:{id:"module类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#module类","aria-hidden":"true"}},[s._v("#")]),s._v(" Module类")]),s._v(" "),t("p",[s._v("若Module类的provide方法使用了scope，那么与它关联的Component类就必须使用同一个scope。")]),s._v(" "),t("p",[s._v("若Module类的provide方法没有使用了scope，那么与它关联的Component类是否使用scope都可以。")]),s._v(" "),t("h3",{attrs:{id:"scope注解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scope注解","aria-hidden":"true"}},[s._v("#")]),s._v(" scope注解")]),s._v(" "),t("p",[s._v("Component类dependencies的其他Component类，它们的scope不能与原Component类的scope相同，即有依赖关系的Component类之间的scope注解必须不同。")]),s._v(" "),t("p",[s._v("Singleton组件不能依赖其他scope组件，只能其他scope组件依赖Singleton组件。")]),s._v(" "),t("p",[s._v("没有scope注解的Component类不能依赖有scope注解的Component类。")]),s._v(" "),t("p",[s._v("一个Component类不能同时有多个scope注解（SubComponent除外）。")])])}],!1,null,null,null);e.options.__file="Dagger2.md";a.default=e.exports}}]);