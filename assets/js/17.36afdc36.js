(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{161:function(a,s,e){"use strict";e.r(s);var n=e(0),t=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"proguard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#proguard","aria-hidden":"true"}},[a._v("#")]),a._v(" ProGuard")]),a._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#proguard介绍"}},[a._v("ProGuard介绍")])]),e("li",[e("a",{attrs:{href:"#proguard工作流程"}},[a._v("ProGuard工作流程")]),e("ul",[e("li",[e("a",{attrs:{href:"#entry-point"}},[a._v("Entry Point")])]),e("li",[e("a",{attrs:{href:"#shrink"}},[a._v("Shrink")])]),e("li",[e("a",{attrs:{href:"#optimize"}},[a._v("Optimize")])]),e("li",[e("a",{attrs:{href:"#obfuscate"}},[a._v("Obfuscate")])])])]),e("li",[e("a",{attrs:{href:"#proguard与gradle"}},[a._v("ProGuard与Gradle")])]),e("li",[e("a",{attrs:{href:"#proguard混淆规范"}},[a._v("ProGuard混淆规范")])]),e("li",[e("a",{attrs:{href:"#混淆语法"}},[a._v("混淆语法")]),e("ul",[e("li",[e("a",{attrs:{href:"#基本格式"}},[a._v("基本格式")])]),e("li",[e("a",{attrs:{href:"#保持某个包下的类名"}},[a._v("保持某个包下的类名")])]),e("li",[e("a",{attrs:{href:"#保持某个包以及其子包下的类名"}},[a._v("保持某个包以及其子包下的类名")])]),e("li",[e("a",{attrs:{href:"#保留子类和接口实现类"}},[a._v("保留子类和接口实现类")])]),e("li",[e("a",{attrs:{href:"#保持内部类"}},[a._v("保持内部类")])]),e("li",[e("a",{attrs:{href:"#保持类中的特定内容"}},[a._v("保持类中的特定内容")])])])]),e("li",[e("a",{attrs:{href:"#基本的混淆配置"}},[a._v("基本的混淆配置")]),e("ul",[e("li",[e("a",{attrs:{href:"#基本指令"}},[a._v("基本指令")])]),e("li",[e("a",{attrs:{href:"#需要保留的东西"}},[a._v("需要保留的东西")])])])]),e("li",[e("a",{attrs:{href:"#实际需求的混淆配置"}},[a._v("实际需求的混淆配置")]),e("ul",[e("li",[e("a",{attrs:{href:"#实体类"}},[a._v("实体类")])]),e("li",[e("a",{attrs:{href:"#内部类"}},[a._v("内部类")])]),e("li",[e("a",{attrs:{href:"#webview"}},[a._v("WebView")])]),e("li",[e("a",{attrs:{href:"#javascript"}},[a._v("javascript")])])])]),e("li",[e("a",{attrs:{href:"#第三方的混淆配置"}},[a._v("第三方的混淆配置")]),e("ul",[e("li",[e("a",{attrs:{href:"#android-support"}},[a._v("android-support")])])])])])]),e("p"),a._v(" "),e("h2",{attrs:{id:"proguard介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#proguard介绍","aria-hidden":"true"}},[a._v("#")]),a._v(" ProGuard介绍")]),a._v(" "),e("p",[a._v("ProGuard可以对Java class文件进行压缩、优化、混淆和预验证。")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("压缩（Shrink）: 检测和删除没有使用的类、字段、方法和特性。")])]),a._v(" "),e("li",[e("p",[a._v("优化（Optimize） : 优化字节码和删除没有使用的指令。")])]),a._v(" "),e("li",[e("p",[a._v("混淆（Obfuscate）: 使用简短且无意义的名称对类、字段和方法进行重命名。")])]),a._v(" "),e("li",[e("p",[a._v("预验证（Preveirfy）: 用来对Java class进行预验证。")])])]),a._v(" "),e("h2",{attrs:{id:"proguard工作流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#proguard工作流程","aria-hidden":"true"}},[a._v("#")]),a._v(" ProGuard工作流程")]),a._v(" "),e("p",[a._v("ProGuard工作流程是：对输入的jars经过Shrink -> Optimize -> Shrink -> Obfuscate -> Preveirfy等工序的依次处理后输出新的jars。")]),a._v(" "),e("h3",{attrs:{id:"entry-point"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#entry-point","aria-hidden":"true"}},[a._v("#")]),a._v(" Entry Point")]),a._v(" "),e("p",[a._v("在ProGuard配置文件中写入的一系列"),e("code",[a._v("-keep")]),a._v("选项都会作为Entry Point。")]),a._v(" "),e("p",[a._v("ProGuard把这些Entry Point作为搜索入口，进行递归遍历，确定代码的哪些部分未被使用。")]),a._v(" "),e("p",[a._v("ProGuard的Shrink、Optimize和Obfuscate等功能都是以Entry Point作为依据的（Preveirfy不需要以此为依据）。")]),a._v(" "),e("h3",{attrs:{id:"shrink"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shrink","aria-hidden":"true"}},[a._v("#")]),a._v(" Shrink")]),a._v(" "),e("p",[a._v("Proguard从Entry Point开始递归遍历，移除那些未被使用的类和类成员。")]),a._v(" "),e("p",[a._v("Shrink会在Optimize步骤后再次执行，因为Optimize可能会再次暴露一些未被使用的类和类成员。")]),a._v(" "),e("p",[a._v("默认开启。可用语句"),e("code",[a._v("-dontshrink")]),a._v("来关闭。")]),a._v(" "),e("h3",{attrs:{id:"optimize"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimize","aria-hidden":"true"}},[a._v("#")]),a._v(" Optimize")]),a._v(" "),e("p",[a._v("将那些非Entry Point的类和方法设置成private、static或final，未被使用的参数会被移除，有些方法可能会被标记为内联。")]),a._v(" "),e("p",[a._v("默认开启。可用"),e("code",[a._v("-dontoptimize")]),a._v("来关闭。")]),a._v(" "),e("p",[a._v("可用"),e("code",[a._v("-optimizationpasses 数字")]),a._v("来设置迭代优化的次数，一般为5。")]),a._v(" "),e("h3",{attrs:{id:"obfuscate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#obfuscate","aria-hidden":"true"}},[a._v("#")]),a._v(" Obfuscate")]),a._v(" "),e("p",[a._v("对非Entry Point的类和类成员进行重命名（简短且无意义的新名称）。")]),a._v(" "),e("p",[a._v("默认开启。可用"),e("code",[a._v("-dontobfuscate")]),a._v("来关闭。")]),a._v(" "),e("h2",{attrs:{id:"proguard与gradle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#proguard与gradle","aria-hidden":"true"}},[a._v("#")]),a._v(" ProGuard与Gradle")]),a._v(" "),e("div",{staticClass:"language-gradle line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("android {\n    buildTypes {\n        release {\n            // 开启ProGuard\n            minifyEnabled true\n            // 指定ProGuard配置文件\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("p",[a._v("使用proguardFiles来指定ProGuard配置文件，也可以使用consumerProguardFiles来指定。")]),a._v(" "),e("p",[a._v("consumerProguardFiles常用于子模块，使子模块导出的aar文件中包含ProGuard配置文件。")]),a._v(" "),e("p",[e("code",[a._v("getDefaultProguardFile()")]),a._v("是获取"),e("code",[a._v("Android SDK根目录/tools/proguard/")]),a._v("下指定文件。该目录下包含了一些ProGuard基本配置文件。")]),a._v(" "),e("p",[a._v("开启ProGuard后，项目构建后会输出以下文件：")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("dump.txt")]),a._v("：说明APK中所有类文件的内部结构。")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("mapping.txt")]),a._v("：提供原始与混淆过的类、方法和字段名称之间的转换。")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("seeds.txt")]),a._v("：列出未进行混淆的类和成员。")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("usage.txt")]),a._v("：列出从 APK 移除的代码。")])])]),a._v(" "),e("p",[a._v("开启ProGuard后，异常堆栈信息里的类或成员是经过重命名的，需要使用"),e("code",[a._v("Android SDK根目录/tools/proguard/bin/retrace.sh")]),a._v("脚本，结合对应的"),e("code",[a._v("mapping.txt")]),a._v("来还原成没有经过混淆的异常堆栈信息。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("retrace.sh -verbose mapping.txt 异常堆栈信息.txt\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"proguard混淆规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#proguard混淆规范","aria-hidden":"true"}},[a._v("#")]),a._v(" ProGuard混淆规范")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("作为Entry Point的类和类成员不可混淆。")])]),a._v(" "),e("li",[e("p",[a._v("AndroidMainfest中的类不可混淆。Android Studio默认不会混淆四大组件、Application子类和Framework中所有的类。")])]),a._v(" "),e("li",[e("p",[a._v("自定义View不可混淆。Android Studio默认不会混淆自定义View。")])]),a._v(" "),e("li",[e("p",[a._v("enum、Parcelable、Serializable等不可混淆。")])]),a._v(" "),e("li",[e("p",[a._v("与GSON等工具相关的实体类不可混淆。")])]),a._v(" "),e("li",[e("p",[a._v("native方法不可混淆。因为native方法名必须要与so库中的方法名一致。")])]),a._v(" "),e("li",[e("p",[a._v("使用反射技术的类和方法不可混淆。")])]),a._v(" "),e("li",[e("p",[a._v("JS调用的相关接口方法不可混淆。")])]),a._v(" "),e("li",[e("p",[a._v("ProGuard默认会对第三方库进行混淆。而第三方库有的已混淆过，有的使用Java反射技术，因此应确保第三方库不被混淆或根据其说明文档进行混淆配置。")])])]),a._v(" "),e("h2",{attrs:{id:"混淆语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#混淆语法","aria-hidden":"true"}},[a._v("#")]),a._v(" 混淆语法")]),a._v(" "),e("h3",{attrs:{id:"基本格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本格式","aria-hidden":"true"}},[a._v("#")]),a._v(" 基本格式")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-指令 名字配置{\n    内容配置\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("ul",[e("li",[e("p",[a._v("名字配置：包名、类名或接口名等的配置。")])]),a._v(" "),e("li",[e("p",[a._v("内容配置：类或接口的方法、变量等的配置。")])])]),a._v(" "),e("h3",{attrs:{id:"保持某个包下的类名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保持某个包下的类名","aria-hidden":"true"}},[a._v("#")]),a._v(" 保持某个包下的类名")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# com.daking.proguard.test包下的类名不会被混淆\n-keep class com.daking.proguard.test.*\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("ul",[e("li",[e("p",[a._v("其子包下的类名依然会被混淆。")])]),a._v(" "),e("li",[e("p",[a._v("类中的方法和成员等依然会被混淆。可在最后加上"),e("code",[a._v("{*;}")]),a._v("来保持类的内容。")])])]),a._v(" "),e("h3",{attrs:{id:"保持某个包以及其子包下的类名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保持某个包以及其子包下的类名","aria-hidden":"true"}},[a._v("#")]),a._v(" 保持某个包以及其子包下的类名")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# com.daking.proguard.test包以及其子包下的类名不会被混淆\n-keep class com.daking.proguard.test.**\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("ul",[e("li",[a._v("类中的内容（方法和成员等）依然会被混淆。可在最后加上"),e("code",[a._v("{*;}")]),a._v("来保持类的内容。")])]),a._v(" "),e("h3",{attrs:{id:"保留子类和接口实现类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保留子类和接口实现类","aria-hidden":"true"}},[a._v("#")]),a._v(" 保留子类和接口实现类")]),a._v(" "),e("p",[a._v("使用extends、implements等Java语法来保持特定类。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# Activity子类的类名不会被混淆\n-keep public class * extends android.app.Activity\n# Serializable实现类的类名不会被混淆\n-keep class * implements java.io.Serializable\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h3",{attrs:{id:"保持内部类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保持内部类","aria-hidden":"true"}},[a._v("#")]),a._v(" 保持内部类")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# Singleton的内部类SingletonHolder的类名和内容都不会被混淆\n-keep class com.daking.proguard.Singleton$SingletonHolder { *; }\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"保持类中的特定内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保持类中的特定内容","aria-hidden":"true"}},[a._v("#")]),a._v(" 保持类中的特定内容")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# Singleton的类名和public方法都不会被混淆\n-keep class com.daking.proguard.Singleton {\n    public <methods>;\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("ul",[e("li",[e("p",[e("code",[a._v("<init>")]),a._v("匹配所有构造器、"),e("code",[a._v("<fields>")]),a._v("匹配所有域、"),e("code",[a._v("<methods>")]),a._v("匹配所有方法。")])]),a._v(" "),e("li",[e("p",[a._v("可在上述匹配符前面加上public、private、native等来进一步限定范围。")])])]),a._v(" "),e("h2",{attrs:{id:"基本的混淆配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本的混淆配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 基本的混淆配置")]),a._v(" "),e("h3",{attrs:{id:"基本指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本指令","aria-hidden":"true"}},[a._v("#")]),a._v(" 基本指令")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 指定代码的压缩级别，在0~7之间，默认为5。\n-optimizationpasses 5\n\t\n# 混淆时不使用大小写混合，混淆后的类名为小写\n-dontusemixedcaseclassnames\n\t\n# 不忽略第三方jar的混淆\n-dontskipnonpubliclibraryclasses\n\t\n# 不做预校验，Android不需要preverify\n-dontpreverify\n\t\n# 记录日志\n-verbose\n\t\n# 混淆时所采用的算法，此处为谷歌推荐的算法\n-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*\n\t\n# 保护代码中的Annotation不被混淆，避免影响JSON实体映射。\n-keepattributes *Annotation*\n\t\n# 避免混淆泛型，避免影响JSON实体映射。\n-keepattributes Signature\n\t\n# 抛出异常时保留代码行号\n-keepattributes SourceFile,LineNumberTable\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br")])]),e("h3",{attrs:{id:"需要保留的东西"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#需要保留的东西","aria-hidden":"true"}},[a._v("#")]),a._v(" 需要保留的东西")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 保持native方法不被混淆\n-keepclasseswithmembernames class * {\n    native <methods>;\n}\n\t\n# 保持自定义控件不被混淆\n-keep public class * extends android.view.View {\n    public <init>(android.content.Context);\n    public <init>(android.content.Context, android.util.AttributeSet);\n    public <init>(android.content.Context, android.util.AttributeSet, int);\n    public void set*(...);\n    *** get* ();\n}\n\t\n# 对R文件下的所有类及其方法，都不能被混淆\n-keepclassmembers class **.R$* { *；}\n\t\n# 保持Parcelable不被混淆\n-keep class * implements android.os.Parcelable {\n    public static final android.os.Parcelable$Creator *;\n}\n\t\n# 保持Serializable不被混淆\n-keepnames class * implements java.io.Serializable\n\t\n# 保持枚举enum类不被混淆，如果混淆报错，则使用下面的-keepclassmembers class * implements java.io.Serializable...\n-keepclassmembers enum * {\n    public static **[] values();\n    public static ** valueOf(java.lang.String);\n}\n\t\n# 保持Serializable不被混淆并且enum类也不被混淆\n-keepclassmembers class * implements java.io.Serializable {\n    static final long serialVersionUID;\n    private static final java.io.ObjectStreamField[] serialPersistentFields;\n    private void writeObject(java.io.ObjectOutputStream);\n    private void readObject(java.io.ObjectInputStream);\n    java.lang.Object writeReplace();\n    java.lang.Object readResolve();\n}\n\t\n# 保留了继承自Activity、Application这些类的子类，因为这些子类有可能被外部调用\n-keep public class * extends android.app.Activity\n-keep public class * extends android.app.Application\n-keep public class * extends android.app.Service\n-keep public class * extends android.content.BroadcastReceiver\n-keep public class * extends android.content.ContentProvider\n-keep public class * extends android.app.backup.BackupAgentHelper\n-keep public class * extends android.preference.Preference\n-keep public class * extends android.view.View\n-keep public class com.android.vending.licensing.ILicensingService\n\t\n# 保留Activity中的方法参数是view的方法，避免影响在layout中编写onClick\n-keepclassmembers class * extends android.app.Activity {\n    public void * (android.view.View);\n}\n\n# 保持测试相关的代码\n-dontnote junit.framework.**\n-dontnote junit.runner.**\n-dontwarn android.test.**\n-dontwarn android.support.test.**\n-dontwarn org.junit.**\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br"),e("span",{staticClass:"line-number"},[a._v("31")]),e("br"),e("span",{staticClass:"line-number"},[a._v("32")]),e("br"),e("span",{staticClass:"line-number"},[a._v("33")]),e("br"),e("span",{staticClass:"line-number"},[a._v("34")]),e("br"),e("span",{staticClass:"line-number"},[a._v("35")]),e("br"),e("span",{staticClass:"line-number"},[a._v("36")]),e("br"),e("span",{staticClass:"line-number"},[a._v("37")]),e("br"),e("span",{staticClass:"line-number"},[a._v("38")]),e("br"),e("span",{staticClass:"line-number"},[a._v("39")]),e("br"),e("span",{staticClass:"line-number"},[a._v("40")]),e("br"),e("span",{staticClass:"line-number"},[a._v("41")]),e("br"),e("span",{staticClass:"line-number"},[a._v("42")]),e("br"),e("span",{staticClass:"line-number"},[a._v("43")]),e("br"),e("span",{staticClass:"line-number"},[a._v("44")]),e("br"),e("span",{staticClass:"line-number"},[a._v("45")]),e("br"),e("span",{staticClass:"line-number"},[a._v("46")]),e("br"),e("span",{staticClass:"line-number"},[a._v("47")]),e("br"),e("span",{staticClass:"line-number"},[a._v("48")]),e("br"),e("span",{staticClass:"line-number"},[a._v("49")]),e("br"),e("span",{staticClass:"line-number"},[a._v("50")]),e("br"),e("span",{staticClass:"line-number"},[a._v("51")]),e("br"),e("span",{staticClass:"line-number"},[a._v("52")]),e("br"),e("span",{staticClass:"line-number"},[a._v("53")]),e("br"),e("span",{staticClass:"line-number"},[a._v("54")]),e("br"),e("span",{staticClass:"line-number"},[a._v("55")]),e("br"),e("span",{staticClass:"line-number"},[a._v("56")]),e("br"),e("span",{staticClass:"line-number"},[a._v("57")]),e("br"),e("span",{staticClass:"line-number"},[a._v("58")]),e("br"),e("span",{staticClass:"line-number"},[a._v("59")]),e("br"),e("span",{staticClass:"line-number"},[a._v("60")]),e("br"),e("span",{staticClass:"line-number"},[a._v("61")]),e("br"),e("span",{staticClass:"line-number"},[a._v("62")]),e("br"),e("span",{staticClass:"line-number"},[a._v("63")]),e("br")])]),e("h2",{attrs:{id:"实际需求的混淆配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实际需求的混淆配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 实际需求的混淆配置")]),a._v(" "),e("h3",{attrs:{id:"实体类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实体类","aria-hidden":"true"}},[a._v("#")]),a._v(" 实体类")]),a._v(" "),e("p",[a._v("一个项目一般都把所有的实体都放在同一个包下，混淆配置可选以下其一。")]),a._v(" "),e("ul",[e("li",[a._v("忽略实体包下的所有类。")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep class com.daking.model.** { *; }\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("ul",[e("li",[a._v("忽略实体包下的所有类的setter和getter。注意，boolean类型的get方法是isXXX。")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep class com.daking.model.** {\n    public void set*(***);\n    public *** get*();\n    public *** is*();\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h3",{attrs:{id:"内部类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内部类","aria-hidden":"true"}},[a._v("#")]),a._v(" 内部类")]),a._v(" "),e("p",[a._v("内部类常容易被混淆而导致调用时为null。")]),a._v(" "),e("p",[a._v("保留某个类中的所有内部类。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep class com.daking.example.A$* { *; }\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("保留某个内部类中所有的内部类。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep class com.daking.example.A$B$* { *; }\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"webview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webview","aria-hidden":"true"}},[a._v("#")]),a._v(" WebView")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keepclassmembers class * extends android.webkit.WebViewClient {\n    public void *(android.webkit.WebView, java.lang.String, android.graphics.Bitmap);\n    public boolean *(android.webkit.WebView, java.lang.String);\n}\n-keepclassmembers class * extends android.webkit.WebViewClient {\n    public void *(android.webkit.WebView, java.lang.String);\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("h3",{attrs:{id:"javascript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#javascript","aria-hidden":"true"}},[a._v("#")]),a._v(" javascript")]),a._v(" "),e("p",[a._v("若MainActivity中使用了js技术，可以这么忽略：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep class com.daking.activity.MainActivity$JSInterface {\n    <methods>;\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h2",{attrs:{id:"第三方的混淆配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第三方的混淆配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 第三方的混淆配置")]),a._v(" "),e("p",[a._v("一般来说，每个第三方jar包在其文档上都有混淆说明。")]),a._v(" "),e("h3",{attrs:{id:"android-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#android-support","aria-hidden":"true"}},[a._v("#")]),a._v(" android-support")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep class android.support.** { *; }\n-dontwarn android.support.**\n-keep public class * extends android.support.v4.**\n-keep public class * extends android.support.v7.**\n-keep public class * extends android.support.annotation.**\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("fragment包下所有类都是引用了v4包的，也要进行混淆忽略。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-keep public class * extends android.app.Fragment\n-keep public class com.daking.fragment.** { *; }\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])])])}],!1,null,null,null);t.options.__file="ProGuard.md";s.default=t.exports}}]);