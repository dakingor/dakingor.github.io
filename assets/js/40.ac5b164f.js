(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{184:function(e,s,t){"use strict";t.r(s);var a=t(0),n=Object(a.a)({},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"content"},[e._m(0),e._v(" "),t("p"),e._m(1),t("p"),e._v(" "),e._m(2),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/FFmpeg/FFmpeg",target:"_blank",rel:"noopener noreferrer"}},[e._v("FFmpeg Github"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://ffmpeg.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("FFmpeg官网"),t("OutboundLink")],1)]),e._v(" "),e._m(3),e._v(" "),t("p",[e._v("下载"),t("a",{attrs:{href:"https://github.com/FFmpeg/FFmpeg",target:"_blank",rel:"noopener noreferrer"}},[e._v("FFmpeg源码"),t("OutboundLink")],1),e._v("。")]),e._v(" "),e._m(4),t("p",[e._v("执行FFmpeg源码的configure命令，检测环境。")]),e._v(" "),e._m(5),e._m(6),t("p",[e._v("出现以上的错误信息，表示需要安装版本较新的yasm。")]),e._v(" "),e._m(7),e._m(8),t("p",[e._v("检测yasm是否安装成功。")]),e._v(" "),e._m(9),t("p",[e._v("再次执行FFmpeg源码的configure命令，yasm的错误信息已消除，但出现如下警告信息：")]),e._v(" "),e._m(10),t("p",[e._v("直接使用Homebrew安装pkg-config。")]),e._v(" "),e._m(11),e._m(12),t("p",[e._v("再次执行FFmpeg源码的configure命令，一切正常，并输出当前配置下FFmpeg支持的库、程序、encoder、decoder、muxer、demuxer、filter、protocol等信息。")]),e._v(" "),t("p",[e._v("利用Homebrew安装sdl2以支持FFmpeg中的ffplay工具。")]),e._v(" "),e._m(13),t("p",[e._v("编译安装FFmpeg。")]),e._v(" "),e._m(14),e._m(15),e._m(16),e._v(" "),t("p",[e._v("FFmpeg本身支持一些音视频编码格式、文件封装格式与流媒体传输协议，但支持的数量有限。")]),e._v(" "),t("p",[e._v("FFmpeg只是提供一套基础的框架，所有的编码格式、文件封装格式与流媒体协议等都可以作为FFmpeg的一个模块挂载在其框架中。")]),e._v(" "),t("p",[e._v("这些模块以第三方外部库的方式提供支持，可以通过FFmpeg源码的configure命令查看FFmpeg所支持的编码格式、文件封装格式与流媒体协议等。")]),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._m(20),e._v(" "),e._m(21),e._m(22),e._v(" "),t("p",[e._v("首先，通过Homebrew安装所需的依赖库。")]),e._v(" "),e._m(23),t("p",[e._v("执行FFmpeg源码的configure命令，并提供自定义的安装配置。")]),e._v(" "),e._m(24)])},[function(){var e=this.$createElement,s=this._self._c||e;return s("h1",{attrs:{id:"macos上编译ffmpeg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#macos上编译ffmpeg","aria-hidden":"true"}},[this._v("#")]),this._v(" macOS上编译FFmpeg")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#ffmpeg资料"}},[this._v("FFmpeg资料")])]),s("li",[s("a",{attrs:{href:"#macos上编译ffmpeg"}},[this._v("macOS上编译FFmpeg")])]),s("li",[s("a",{attrs:{href:"#ffmpeg定制"}},[this._v("FFmpeg定制")])]),s("li",[s("a",{attrs:{href:"#本人的ffmpeg定制"}},[this._v("本人的FFmpeg定制")])])])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"ffmpeg资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg资料","aria-hidden":"true"}},[this._v("#")]),this._v(" FFmpeg资料")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"macos上编译ffmpeg-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#macos上编译ffmpeg-2","aria-hidden":"true"}},[this._v("#")]),this._v(" macOS上编译FFmpeg")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ git clone git@github.com:FFmpeg/FFmpeg.git\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ cd FFmpeg\n$ ./configure\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("nasm/yasm not found or too old. Use --disable-x86asm for a crippled build.\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language-linux line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 通过yasm源码进行安装\n$ wget http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz\n$ tar -xvf yasm-1.3.0.tar.gz\n$ cd yasm-1.3.0\n$ ./configure\n$ make\n$ make install\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language-linux line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("# 通过Homebrew安装yasm\n# 如果Homebrew中收录的yasm版本过低，那还是需要通过源码进行安装\n$ brew install yasm\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ which yasm\n/usr/local/bin/yasm\n\n$ yasm --version\nyasm 1.3.0\nCompiled on Oct 23 2018.\nCopyright (c) 2001-2014 Peter Johnson and other Yasm developers.\nRun yasm --license for licensing overview and summary.\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("WARNING: pkg-config not found, library detection may fail.\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ brew install pkg-config\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ pkg-config --version\n0.29.2\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ brew install sdl2\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("cd FFmpeg\n$ make\n$ make install\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ which ffmpeg\n/usr/local/bin/ffmpeg\n\n$ which ffplay\n/usr/local/bin/ffplay\n\n$ which ffprobe\n/usr/local/bin/ffprobe\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"ffmpeg定制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg定制","aria-hidden":"true"}},[this._v("#")]),this._v(" FFmpeg定制")])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",[t("li",[t("p",[t("code",[e._v("./configure")]),e._v("：FFmpeg的整体支持情况。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("./configure --list-encoders")]),e._v("：FFmpeg支持的编码器。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("./configure --list-decoders")]),e._v("：FFmpeg支持的解码器。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("./configure --list-muxers")]),e._v("：FFmpeg支持的封装。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("./configure --list-demuxers")]),e._v("：FFmpeg支持的解封装。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("./configure --list-protocols")]),e._v("：FFmpeg支持的通信协议。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("./configure --list-filters")]),e._v("：FFmpeg支持的滤镜。")])])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("对于FFmpeg不支持的格式，可以通过"),s("code",[this._v("configure --help")]),this._v("查看所需要的第三方外部库，然后通过增加对应的编译参数选项（"),s("code",[this._v("--enable-*")]),this._v("系列选项）进行支持。")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("# 仅支持H.264视频与AAC音频编码\n$ ./configure --enable-libx264 --enable-libfdk-aac --enable-gpl --enable-nonfree\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("FFmpeg默认支持的格式较多，最终编译出来的包体积较大，可通过"),s("code",[this._v("--disable-*")]),this._v("系列的参数选项来关闭业务上不需要用到的模块。")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ ./configure --disable-videotoolbox\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"本人的ffmpeg定制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本人的ffmpeg定制","aria-hidden":"true"}},[this._v("#")]),this._v(" 本人的FFmpeg定制")])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language-linux line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ brew install pkg-config\n$ brew install sdl2\n$ brew install yasm\n$ brew install lame\n$ brew install fdk-aac\n$ brew install libass\n$ brew install speex\n$ brew install x264\n$ brew install x265\n$ brew install libbluray\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language-linux line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ ./configure --enable-fontconfig --enable-gpl --enable-libass \\\n--enable-libbluray --enable-libfreetype --enable-libmp3lame \\\n--enable-libspeex --enable-libx264 --enable-libx265 \\\n--enable-libfdk-aac --enable-version3 --enable-cross-compile \\\n--enable-nonfree --enable-videotoolbox --enable-audiotoolbox\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])}],!1,null,null,null);n.options.__file="macOS上编译FFmpeg.md";s.default=n.exports}}]);